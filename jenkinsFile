pipeline{
	agent any 
	stages 
	{
		stage('Build')
		{
			steps{
				echo "Building the code....."
				bat "mvn clean"
			}
		}
		
		stage('Test')
		{
			steps{
				echo "Testing  the code....."
				bat "mvn test"
			}
		}
		
		 stage('Generate Allure Report') {
            steps {
                sh 'mvn allure:report'
            }
        }
		
		stage('Compile')
		{
			steps{
				echo "Compiling  the code....."
				bat "mvn compile"
			}
		}
		
		stage('Deploy')
		{
			steps{
				echo "Deploying the code....."
			}
		}
	}
	
	 post {
        always {
            allure includeProperties: false, jdk: '', results: [[path: 'target/allure-results']]
            publishHTML(target: [
                allowMissing: false,
                keepAll: true,
                reportDir: '.',
                reportFiles: 'extent-report.html',
                reportName: 'Extent Report'
            ])
        }
    }
}